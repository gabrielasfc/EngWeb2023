extends layout

block content
    .w3-card-4
        header.w3-container.w3-deep-purple.w3-margin-bottom
            h1.w3-center Tasks
        
        .w3-cell-row
            form.w3-container.w3-cell(action="/insert" method="POST")
                h1 Insert Task
                fieldset
                    label.w3-text-grey Description
                    input.w3-input.w3-border(type="text" name="description" required)
                    br
                    label.w3-text-grey Who
                    input.w3-input.w3-border(type="text" name="who" required)
                    br
                    label.w3-text-grey Due Date
                    input.w3-input.w3-border(type="text" name="duedate" required)
                    input.w3-input.w3-border.w3-light-grey(type="hidden" name="done" value="false")
                    button.w3-btn.w3-deep-purple.w3-round.w3-right.w3-margin-top(type="submit") Submit
                
        if to_edit
            .w3-cell-row
                form.w3-container.w3-cell(action="/edit" method="POST")
                    h1 Edit Task
                    fieldset
                        label.w3-text-grey Description
                        input.w3-input.w3-border(type="text" name="description" value=to_edit.description required)
                        br
                        label.w3-text-grey Who
                        input.w3-input.w3-border(type="text" name="who" value=to_edit.who required)
                        br
                        label.w3-text-grey Due Date
                        input.w3-input.w3-border(type="text" name="duedate" value=to_edit.duedate required)
                        input.w3-input(type="hidden" name="done" value=to_edit.done)
                        input.w3-input(type="hidden" name="id" value=to_edit.id)
                        button.w3-btn.w3-deep-purple.w3-round.w3-right.w3-margin-top(type="submit") Submit
        
        .w3-cell-row
            .w3-container.w3-cell(style="width:50%")
                h1 To Do
                table.w3-table-all
                    tr
                        th Description
                        th Who
                        th Due Date
                        th Actions

                    each task in tasks
                        if task.done == "false"
                            tr
                                td #{task.description}
                                td #{task.who}
                                td #{task.duedate}
                                td
                                    a.glyphicon.glyphicon-pencil.w3-margin-right.w3-large(href="/edit/"+task.id style="text-decoration: none; color: #683cb4")
                                    a.glyphicon.glyphicon-ok.w3-margin-right.w3-large(href="/done/"+task.id style="text-decoration: none; color: #683cb4")     
                                    a.glyphicon.glyphicon-trash.w3-large(href="/delete/"+task.id style="text-decoration: none; color: #683cb4")

            .w3-container.w3-cell(style="width:50%")
                h1 Done
                table.w3-table-all
                    tr
                        th Description
                        th Who
                        th Due Date
                        th Actions
                    
                    each task in tasks
                        if task.done == "true"
                            tr
                                td #{task.description}
                                td #{task.who}
                                td #{task.duedate}
                                td   
                                    a.glyphicon.glyphicon-trash.w3-large(href="/delete/#{task.id}" style="text-decoration: none; color: #683cb4")
        
        footer.w3-container.w3-deep-purple.w3-center.w3-margin-top
            h5 Generated by EngWeb2023 in #{d}

        